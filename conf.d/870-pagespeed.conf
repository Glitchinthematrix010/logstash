filter { 
  if [type] == "apache_error" {
    grok { 
      patterns_dir => [ "/etc/logstash/patterns.d/" ] 
      tag_on_failure => [ ] 
      add_tag => [ "Known Message", "Error" ] 
      match => { "message" => [ 
        "^\[pagespeed:error\] \[pid %{POSINT}\] \[mod_pagespeed \[\d.-\]+ @%{POSINT}\] Could not create directories for file %{PATH:[files][dst][filename]}$",
        "^\[pagespeed:error\] \[pid %{POSINT}\] \[mod_pagespeed \[\d.-\]+ @%{POSINT}\] Failed to make directory %{PATH:[files][dst][filename]}: File exists$",
        "^\[pagespeed:error\] \[pid %{POSINT}\] \[mod_pagespeed \[\d.-\]+ @%{POSINT}\] Slow ReadFile operation on file %{PATH:[files][src][filename]}: %{BASE10NUM}${TIMEUNITS}ms; configure SlowFileLatencyUs to change threshold\n$"
      ] } 
    } 
  }
}
